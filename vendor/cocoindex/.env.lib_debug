export RUST_LOG=warn,cocoindex_engine=trace,tower_http=trace
export RUST_BACKTRACE=1

export COCOINDEX_SERVER_CORS_ORIGINS=http://localhost:3000,https://cocoindex.io

# Set COCOINDEX_DEV_ROOT to the directory containing this file (repo root)
# This allows running examples from any subdirectory
export COCOINDEX_DEV_ROOT="$(cd "$(dirname "${BASH_SOURCE[0]:-$0}")" && pwd)"

# Function for running examples with the local editable cocoindex package
# Usage: coco-dev-run cocoindex update main
coco-dev-run() {
    local pyver
    if [ -f "$COCOINDEX_DEV_ROOT/.python-version" ]; then
        pyver="$(cat "$COCOINDEX_DEV_ROOT/.python-version")"
    else
        pyver="3.11"
    fi

    uv run --python "$pyver" --with-editable "$COCOINDEX_DEV_ROOT" "$@"
}
